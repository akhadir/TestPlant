<div class="test-code">
<button class="btn btn-sm btn-primary copy">Copy</button>
<div class="border code">
<pre class="first">
/*
    Generated On: {{now |date:'medium'}}
    Author: Test Plant
*/
<pre ng-if="type == '1'">
var expect;
</pre>
<pre ng-if="type == '2'">
var expect, ajaxSend, ajaxData, ajaxCount;
ajaxCount = 0;
ajaxData = [];
hookAjax(function () {
    ajaxCount++;
    ajaxData.push(arguments[0]);
});
function hookAjax(callback) {
    ajaxSend = XMLHttpRequest.prototype.send;
    XMLHttpRequest.prototype.send = function () {
        callback.apply(this, arguments);
        ajaxSend.apply(this, arguments);
    }
}
</pre>
<pre ng-if="type == '3'">
var FlurrySpyAgent = {
    data: [],
    init: function () {
        var self = this;
        yo.yTrack.push = function () {
            self.data.push(arguments);
            $("body").attr("data-ytrack", JSON.stringify(self.data));
        }
        yo.yTrack.endTimedEvent = function () {
            self.data.push(arguments);
            $("body").attr("data-ytrack", JSON.stringify(self.data));
        }
    },
    getData: function() {
        if (!this.data || !this.data.length) {
            this.data = JSON.parse($("body").attr("data-ytrack"));
        }
        var data = this.data.shift();
        this.reset();
        return data;
    },
    reset: function () {
        this.data = [];
        $("body").attr("data-ytrack", '');
    }
}
</pre>
describe("Auto Generated Test Cases", function() {
    before(function(done) {
        this.timeout(6000);
        setTimeout(function () {
            FlurrySpyAgent.init();
            expect = chai.expect;
            done();
        }, 5000);
    });

    after(function() {
<pre ng-if="type == '2'">
        unHookAjax();
</pre>
    });

    beforeEach(function() {
        //console.log('before each');
    });

    afterEach(function() {
        //console.log('after each');
    });
<pre ng-if="type == '1'">
    function validate(node, propText, orig, text) {
        var from,
            to,
            prop,
            text = "Node Property: " + propText;
        if (propText === "focus") {
            expect((document.activeElement == node).toString(), text).to.equal(orig);
        } else if (orig.indexOf("px") > 0 && orig != '0px') {
            prop = node.css(propText);
            prop = parseInt(prop);
            orig = parseInt(orig);
            if (orig >= 0) {
                from = orig - Math.ceil(orig * 0.12);
                to = orig + Math.ceil(orig * 0.12);
            } else {
                from = orig + Math.ceil(orig * 0.12);
                to = orig - Math.ceil(orig * 0.12);
            }
            expect(prop, text).to.be.within(from, to);
        } else {
            prop = node.css(propText);
            if (orig === "auto" || orig === "default") {
                expect(prop, text).to.match(/(default|auto)/);
            } else if (prop.indexOf("px") > 0 || orig != '0px' ) {
                expect(prop, text).to.equal(orig);
            } else {
                expect(prop, text).to.match(/(default|auto)/);
            }
        }
    }
</pre>
    function runEvent(node, event, timer, callback) {
        if (node && event) {
            $(node)[event]();
            setTimeout(function () {
                callback();
            }, timer);
        } else {
            callback();
        }
    }
<pre ng-if="type == '2'">
    function unHookAjax() {
        XMLHttpRequest.prototype.send = ajaxSend;
    }
</pre>
<pre ng-if="type == '1'">
<pre class="merge" ng-repeat="(index, test) in testcases">
<pre ng-if="!test.events">
    it("#{{false|eventIndex}}.{{index + 1}} {{test.name}}", function() {
</pre>
<pre ng-if="test.events">
    it("#{{true|eventIndex}}.{{index + 1}} {{test.name}} with events({{test.events.length - 1}})", function(done) {
</pre>
<pre ng-if="!test.events">
        var node = $("{{test.root}}").find("{{test.tnode}}"),
            orig,
            prop;
<pre ng-repeat="(prop, val) in test.nprop">
        validate(node, "{{prop}}", "{{val[0]}}");
</pre>
</pre>
<pre ng-if="test.events">
        this.timeout({{test.events|timerSum}});
        function runValidation() {
            var node = $("{{test.root}}").find("{{test.tnode}}"),
                orig,
                prop;
<pre ng-repeat="(prop, val) in test.nprop">
            validate(node, "{{prop}}", "{{val[0]}}");
</pre>
            done();
        }
<pre ng-repeat="(eindex, event) in test.events">
        runEvent("{{event.node[0]}}", "{{event.event[0]|getEventName}}", {{event.timer[0]}}000, function () {
<pre ng-if="eindex + 1 == test.events.length">
            runValidation();
</pre>
</pre>
<pre ng-repeat="(eindex, event) in test.events">
        });
</pre>
</pre>
    });
</pre>
</pre>
<pre ng-if="type == '2'">
<pre class="merge" ng-repeat="(index, test) in testcases">
<pre ng-if="!test.events">
    it("#{{index}} {{test.name}}", function () {
        var post = '{{test.post}}';
        expect(post, "Ajax Call #{{index}}").to.equal(ajaxData[{{index}}]);
</pre>
<pre ng-if="test.events">
    it("#{{index}} {{test.name}} with events({{test.events.length - 1}})", function (done) {
        this.timeout({{test.events|timerSum}});
        function runValidation() {
            var post = '{{test.post}}';
            expect(post, "Ajax Call #{{index}}").to.equal(ajaxData[{{index}}]);
            done();
        }
</pre>
<pre ng-repeat="(eindex, event) in test.events">
        runEvent("{{event.node[0]}}", "{{event.event[0]|getEventName}}", {{event.timer[0]}}000, function () {
<pre ng-if="eindex + 1 == test.events.length">
            runValidation();
            //ajaxCount = 0;
            //ajaxData = [];
</pre>
</pre>
<pre ng-repeat="(eindex, event) in test.events">
        });
</pre>
    });
</pre>
</pre>
<pre ng-if="type == '3'">
<pre class="merge" ng-repeat="(index, test) in testcases">
<pre ng-if="!test.events">
    it("#{{index}} {{test.name}}", function () {
        var value = '{{test.test}}';
        expect(value, "Call #{{index}}").to.equal(callData[{{index}}]);
</pre>
<pre ng-if="test.events">
    it("#{{index}} {{test.name}} with events({{test.events.length - 1}})", function (done) {
        this.timeout({{test.events|timerSum}});
        function runValidation() {
            var value = '{{test.test}}',
                callData = JSON.stringify(FlurrySpyAgent.getData());
            expect(value, "Call #{{index}}").to.equal(callData);
            done();
        }
</pre>
<pre ng-repeat="(eindex, event) in test.events">
        runEvent("{{event.node[0]}}", "{{event.event[0]|getEventName}}", {{event.timer[0]}}000, function () {
<pre ng-if="eindex + 1 == test.events.length">
            runValidation();
            //ajaxCount = 0;
            //ajaxData = [];
</pre>
</pre>
<pre ng-repeat="(eindex, event) in test.events">
        });
</pre>
    });
</pre>
</pre>
<pre class="last">
});
</pre>
</pre>
</div>
<button class="btn btn-sm btn-primary bottom copy">Copy</button>
</div>